name: cppcheck-action-other_options-test

on:
  push:

jobs:
  build:
    name: cppcheck
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: cppcheck
        uses: ./
        with:
          log-level: 'verbose'
          std: 'c++14'
          platform: 'unix64'
          suppress: missingIncludeSystem
          sources: tests
          annotation-failures: error
          annotation-warnings: style

      - name: Annotate lines with errors
        uses: yuzutech/annotations-action@v0.4.0
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
          title: 'Results of CppCheck'
          input: './annotations.json'